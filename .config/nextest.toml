# Nextest configuration for Onyxia
#
# GPU tests must run serially to avoid memory exhaustion from parallel model loading.

# Define test groups
[test-groups]
# All GPU tests go into the "serial" group which runs with max_threads=1
gpu-tests = { max-threads = 1 }

[profile.default]
# Assign GPU-intensive tests to the serial group
[[profile.default.overrides]]
filter = 'test(~generation) + test(~gemma) + test(~llm)'
test-group = 'gpu-tests'
